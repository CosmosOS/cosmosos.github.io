<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title> </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content=" ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../index.html" title="Home">Home</a>
                      </li>
                      <li>
                          <a href="../../install.html" title="Install">Install</a>
                      </li>
                      <li>
                          <a href="https://gocosmos.org" title="Cosmos Website">Cosmos Website</a>
                      </li>
                      <li>
                          <a href="../../articles/GettingStarted.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a>API Documentation</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../GettingStarted.html" title="Getting Started" class="">Getting Started</a>
                    </li>
                    <li class="">
                      <a href="../Compiler/il2cpu.html" title="Compiler" class="">Compiler</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Debugger</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Debugger/DebugCommands.html" title="Debug Commands" class="">Debug Commands</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <a href="../Express/Compile.html" title="Express" class="">Express</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Installation</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Installation/DevKit.html" title="Dev Kit" class="">Dev Kit</a>
                          </li>
                          <li class="">
                            <a href="../Installation/Running.html" title="Running" class="">Running</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Kernel</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Kernel/Levels.html" title="Levels" class="">Levels</a>
                          </li>
                          <li class="active">
                            <a href="../Kernel/Plugs.html" title="Plugs" class="active">Plugs</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/Startup.html" title="Startup" class="">Startup</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/CGS.html" title="Graphics" class="">Graphics</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/VFS.html" title="Virtual File System" class="">Virtual File System</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/Network.html" title="Network" class="">Network</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/ManifestResouceStream.html" title="Resource Files" class="">Resource Files</a>
                          </li>
                          <li class="">
                            <a href="../Kernel/MemoryManagement.html" title="Memory Management and Garbage Collection" class="">Memory Management and Garbage Collection</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Reference</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Reference/x86.html" title="x86" class="">x86</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Tests</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Tests/TestRunner.html" title="Test Runner" class="">Test Runner</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p>Plugs are used to fill &quot;holes&quot; in .NET libraries and replace them with different
code. Holes exist for example when a method in .NET library uses a Windows API
call. That API call will not be available on Cosmos. Emulating the win32 API would be highly inefficient. Instead,
Cosmos replaces specific methods and property implementations that rely on
win32 API calls. Plugs can also be used to provide an alternate implementation
for a method, even if it does not rely on the Windows API.</p>
<p>Plugs can be implemented in the following manners:</p>
<ul>
<li>Code Plug - Standard C# (or any .NET language) is used to provide the alternate  implementation.</li>
<li>Assembly Languge - In a few low level cases assembly language is used. This is  reserved for a few cases and only allowed in the Cosmos.Core ring.</li>
<li>X# - Not supported as of yet. Used in place of Assembly language.</li>
</ul>
<p>When a Cosmos project is compiled, IL2CPU creates a list of plugs. When it
encounters a method or property for which a plug exists, instead of using the IL
contained in the existing implementation, it substitutes it with the plug version
instead.</p>
<h3 id="section"></h3>
<p>Plug Targets</p>
<ul>
<li>Source Plugs - Used to target a class library without modifiable or available  source.  For example the Console class in the .NET Framework. The Console class uses the  Windows API, so plugs can be used to redefine the methods in the Console class  to use code which interacts with Cosmos instead. For these types of plug  targets, the attributes are specified on the plug implemenation since the source  cannot be modified of the target. If we coud modify the source, we wouldn't need  plugs. :)</li>
<li>Assembly Plug - Empty methods which create a sort of &quot;abstract&quot; class are used  to define an interface to an assembly language plug. This type of plug is rare  and only for the core ring. For these types of plugs, the attributes are  specified on the target, rather than the implementation.</li>
</ul>
<p>Non-source targets should never need to use assembly language, but if they do
the plugs must be cascaded since assembly language plugs can only be applied to
classes with modifiable source.</p>
<h3 id="section-1"></h3>
<p>Implementing a Plug</p>
<p>Plugs can be applied to a class, or to an individual method or property. Plug
implementations are defined by applying attributes to the class which provides
the plug implementation.</p>
<h3 id="section-2"></h3>
<p>Plug Assembly Naming in Cosmos</p>
<p>Plugs assemblies in Cosmos are named in the following manner.</p>
<p>Cosmos.<ring>.Plugs.<unique section="" of="" target="" namespace=""><p>
<p>ie Cosmos.System.Plugs.System</p>
<p>Normally only one section will exist after plugs, but mutliple sections could
exist to further seperate a group of plugs into multiple assemblies. In the
previous example we can determine the following information:</p>
<ul>
<li><strong>Cosmos</strong>.System.Plugs.System - All Cosmos assemblies start with Cosmos.*.  User assemblies should not use the Cosmos. prefix.</li>
<li>Cosmos.<strong>System</strong>.Plugs.System - The plugs are part of the System ring.</li>
<li>Cosmos.System.<strong>Plugs</strong>.System - Plugs seperates plugs from normal code with  in the Cosmos.System.*</li>
<li>Cosmos.System.Plugs.<strong>System</strong> - The plugs in this assembly will apply to  System.<em>. It could also be System.Collections for example to apply to  System.Collections.</em></li>
</ul>
<p>Plugs should be implemented in the highest ring possible and according to the
code in the plug, not according to the class to which the plug targets. Most
plugs should be in fact in the system ring. Except for a few special plugs
needed by the compiler, off hand I cannot think of any that should be
implemented in any ring lower than the system ring.</p>
<p><strong>Plug Target</strong></p>
<p>Please specify the PlugTarget using the fully qualified name, like:
global::System.Console. To avoid later name colisions.</p>
</unique></ring></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/CosmosOS/Cosmos/blob/50a4ccef500fb6814fa621eb0b1fab4a4257c592/Docs/articles/Kernel/Plugs.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              <span></span>
              
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
